# GitHub Actions è‡ªåŠ¨åŒ–å·¥ä½œæµ

## ğŸ“‹ å·¥ä½œæµæ¦‚è§ˆ

OOPS ä½¿ç”¨ GitHub Actions å®ç°è‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•å’Œå‘å¸ƒã€‚

---

## ğŸš€ Release Workflow (å‘å¸ƒå·¥ä½œæµ)

### è§¦å‘æ¡ä»¶
- **è‡ªåŠ¨è§¦å‘**: æ¨é€ç‰ˆæœ¬æ ‡ç­¾ï¼ˆå¦‚ `v1.0.0`ï¼‰
- **æ‰‹åŠ¨è§¦å‘**: åœ¨ GitHub Actions é¡µé¢æ‰‹åŠ¨è¿è¡Œ

### å·¥ä½œæµç¨‹

```mermaid
graph LR
    A[æ¨é€æ ‡ç­¾] --> B[æ„å»º Windows]
    A --> C[æ„å»º Linux]
    A --> D[æ„å»º macOS]
    B --> E[åˆ›å»º Release]
    C --> E
    D --> E
    E --> F[ä¸Šä¼ æ„å»ºäº§ç‰©]
```

### æ„å»ºäº§ç‰©
- `oops-windows-x64.exe` - Windows å¯æ‰§è¡Œæ–‡ä»¶
- `oops-linux-x64` - Linux å¯æ‰§è¡Œæ–‡ä»¶
- `oops-macos-x64` - macOS å¯æ‰§è¡Œæ–‡ä»¶

### ä½¿ç”¨æ–¹æ³•

#### 1. åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
```bash
# ç¡®ä¿ä»£ç å·²æäº¤
git add .
git commit -m "feat: å‡†å¤‡å‘å¸ƒ v1.0.0"

# åˆ›å»ºæ ‡ç­¾
git tag -a v1.0.0 -m "OOPS v1.0.0 - é¦–ä¸ªæ­£å¼ç‰ˆæœ¬"

# æ¨é€æ ‡ç­¾ï¼ˆè§¦å‘è‡ªåŠ¨æ„å»ºï¼‰
git push origin v1.0.0
```

#### 2. æŸ¥çœ‹æ„å»ºè¿›åº¦
1. è®¿é—® GitHub ä»“åº“
2. ç‚¹å‡» "Actions" æ ‡ç­¾
3. æŸ¥çœ‹ "Build and Release" å·¥ä½œæµ

#### 3. å‘å¸ƒå®Œæˆ
- è‡ªåŠ¨åˆ›å»º GitHub Release
- ä¸Šä¼ æ‰€æœ‰å¹³å°çš„å¯æ‰§è¡Œæ–‡ä»¶
- ç”Ÿæˆå‘å¸ƒè¯´æ˜

---

## ğŸ§ª CI Workflow (æŒç»­é›†æˆå·¥ä½œæµ)

### è§¦å‘æ¡ä»¶
- æ¨é€åˆ° `main` æˆ– `dev` åˆ†æ”¯
- åˆ›å»º Pull Request

### æ£€æŸ¥é¡¹ç›®

#### 1. æµ‹è¯• (Test)
- **å¤šPythonç‰ˆæœ¬**: 3.8, 3.9, 3.10, 3.11
- **å¤šæ“ä½œç³»ç»Ÿ**: Ubuntu, Windows
- **æµ‹è¯•è¦†ç›–ç‡**: è‡ªåŠ¨ä¸Šä¼ åˆ° Codecov

```bash
# æœ¬åœ°è¿è¡Œæµ‹è¯•
pytest tests/ -v --cov=oops
```

#### 2. ä»£ç è´¨é‡ (Lint)
- **Black**: ä»£ç æ ¼å¼æ£€æŸ¥
- **isort**: å¯¼å…¥æ’åºæ£€æŸ¥
- **flake8**: ä»£ç è§„èŒƒæ£€æŸ¥
- **mypy**: ç±»å‹æ£€æŸ¥

```bash
# æœ¬åœ°è¿è¡Œæ£€æŸ¥
black --check oops/
isort --check-only oops/
flake8 oops/
mypy oops/
```

#### 3. æ„å»ºæµ‹è¯• (Build Test)
- æµ‹è¯• PyInstaller æ„å»º
- éªŒè¯å¯æ‰§è¡Œæ–‡ä»¶ç”Ÿæˆ

```bash
# æœ¬åœ°æµ‹è¯•æ„å»º
pyinstaller --clean --noconfirm build/config/build.spec
```

---

## ğŸ“ é…ç½®æ–‡ä»¶

### Release Workflow
**æ–‡ä»¶**: `.github/workflows/release.yml`

**å…³é”®é…ç½®**:
```yaml
on:
  push:
    tags:
      - 'v*.*.*'  # ç‰ˆæœ¬æ ‡ç­¾æ ¼å¼
  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è§¦å‘
```

### CI Workflow
**æ–‡ä»¶**: `.github/workflows/ci.yml`

**å…³é”®é…ç½®**:
```yaml
on:
  push:
    branches: [ main, dev ]
  pull_request:
    branches: [ main, dev ]
```

---

## ğŸ”§ æœ¬åœ°å¼€å‘æµç¨‹

### 1. å¼€å‘æ–°åŠŸèƒ½
```bash
# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/new-feature

# å¼€å‘å’Œæµ‹è¯•
# ... ç¼–å†™ä»£ç  ...

# è¿è¡Œæµ‹è¯•
pytest tests/

# ä»£ç æ ¼å¼åŒ–
black oops/
isort oops/

# æäº¤ä»£ç 
git add .
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"
git push origin feature/new-feature
```

### 2. åˆ›å»º Pull Request
1. åœ¨ GitHub ä¸Šåˆ›å»º PR
2. ç­‰å¾… CI æ£€æŸ¥é€šè¿‡
3. ä»£ç å®¡æŸ¥
4. åˆå¹¶åˆ° main åˆ†æ”¯

### 3. å‘å¸ƒæ–°ç‰ˆæœ¬
```bash
# æ›´æ–°ç‰ˆæœ¬å·
# ç¼–è¾‘ oops/__init__.py ä¸­çš„ __version__

# æ›´æ–° CHANGELOG.md
# æ·»åŠ æ–°ç‰ˆæœ¬çš„æ›´æ–°å†…å®¹

# æäº¤æ›´æ”¹
git add .
git commit -m "chore: å‡†å¤‡å‘å¸ƒ v1.1.0"
git push origin main

# åˆ›å»ºå¹¶æ¨é€æ ‡ç­¾
git tag -a v1.1.0 -m "OOPS v1.1.0"
git push origin v1.1.0

# ç­‰å¾…è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ
```

---

## ğŸ› æ•…éšœæ’é™¤

### æ„å»ºå¤±è´¥

#### é—®é¢˜: PyInstaller æ„å»ºå¤±è´¥
**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ `build/config/build.spec` é…ç½®
2. ç¡®ä¿æ‰€æœ‰ä¾èµ–éƒ½åœ¨ `requirements.txt` ä¸­
3. æœ¬åœ°æµ‹è¯•æ„å»ºï¼š`pyinstaller --clean build/config/build.spec`

#### é—®é¢˜: æµ‹è¯•å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**:
1. æœ¬åœ°è¿è¡Œæµ‹è¯•ï¼š`pytest tests/ -v`
2. æ£€æŸ¥æµ‹è¯•æ—¥å¿—
3. ä¿®å¤å¤±è´¥çš„æµ‹è¯•

#### é—®é¢˜: ä»£ç è´¨é‡æ£€æŸ¥å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**:
```bash
# è‡ªåŠ¨ä¿®å¤æ ¼å¼é—®é¢˜
black oops/
isort oops/

# æ£€æŸ¥å‰©ä½™é—®é¢˜
flake8 oops/
```

### Release åˆ›å»ºå¤±è´¥

#### é—®é¢˜: æ ‡ç­¾å·²å­˜åœ¨
**è§£å†³æ–¹æ¡ˆ**:
```bash
# åˆ é™¤æœ¬åœ°æ ‡ç­¾
git tag -d v1.0.0

# åˆ é™¤è¿œç¨‹æ ‡ç­¾
git push origin :refs/tags/v1.0.0

# é‡æ–°åˆ›å»ºæ ‡ç­¾
git tag -a v1.0.0 -m "æ–°çš„å‘å¸ƒè¯´æ˜"
git push origin v1.0.0
```

#### é—®é¢˜: æƒé™ä¸è¶³
**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿ä»“åº“è®¾ç½®ä¸­å¯ç”¨äº† Actions
- æ£€æŸ¥ `GITHUB_TOKEN` æƒé™

---

## ğŸ“Š ç›‘æ§å’Œç»Ÿè®¡

### GitHub Actions é¡µé¢
- æŸ¥çœ‹æ‰€æœ‰å·¥ä½œæµè¿è¡Œå†å²
- ä¸‹è½½æ„å»ºæ—¥å¿—
- æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡

### Codecov (å¯é€‰)
- è‡ªåŠ¨ä¸Šä¼ æµ‹è¯•è¦†ç›–ç‡
- ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
- PR ä¸­æ˜¾ç¤ºè¦†ç›–ç‡å˜åŒ–

---

## ğŸ” å®‰å…¨æ€§

### Secrets ç®¡ç†
- `GITHUB_TOKEN`: è‡ªåŠ¨æä¾›ï¼Œç”¨äºåˆ›å»º Release
- ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯
- ä½¿ç”¨ GitHub Secrets å­˜å‚¨æ•æ„Ÿé…ç½®

### ä¾èµ–å®‰å…¨
- å®šæœŸæ›´æ–°ä¾èµ–
- ä½¿ç”¨ Dependabot è‡ªåŠ¨æ£€æŸ¥ä¾èµ–æ›´æ–°
- å®¡æŸ¥ä¾èµ–çš„å®‰å…¨æ¼æ´

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **[æ„å»ºæ–‡æ¡£](../../build/docs/BUILD.md)** - æœ¬åœ°æ„å»ºè¯´æ˜
- **[å‘å¸ƒæ£€æŸ¥æ¸…å•](RELEASE_CHECKLIST_v1.0.0.md)** - å‘å¸ƒå‰æ£€æŸ¥
- **[å¼€å‘è€…æŒ‡å—](DEVELOPER_GUIDE.md)** - å¼€å‘è§„èŒƒ

---

## ğŸ¯ æœ€ä½³å®è·µ

### ç‰ˆæœ¬å·è§„èŒƒ
éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬ (Semantic Versioning):
- `v1.0.0` - ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢å·
- `v1.0.0-beta.1` - é¢„å‘å¸ƒç‰ˆæœ¬
- `v1.0.0-rc.1` - å€™é€‰ç‰ˆæœ¬

### æäº¤ä¿¡æ¯è§„èŒƒ
```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼
refactor: é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³
```

### åˆ†æ”¯ç­–ç•¥
- `main` - ç¨³å®šç‰ˆæœ¬
- `dev` - å¼€å‘ç‰ˆæœ¬
- `feature/*` - åŠŸèƒ½åˆ†æ”¯
- `hotfix/*` - ç´§æ€¥ä¿®å¤

---

**è‡ªåŠ¨åŒ–è®©å‘å¸ƒæ›´ç®€å•ï¼** ğŸš€
